<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>DevTools Snippets</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="devtools-snippets is a collection of helpful JavaScript code snippets to use inside of browser devtools.">
    <meta name="author" content="Brian Grinstead, devtools-snippets contributors">
    <link href="docs/styles.css" rel="stylesheet">
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <h1>DevTools Snippets</h1>
        <h2>A collection of helpful snippets to use inside of browser devtools</h2>
        <a id="project-link" href="https://github.com/bgrins/devtools-snippets">View Project On Github</a>
      </div>
      <div class="content">
        <div class="alert">
          <p>
            <strong>Instructions:</strong>  The snippets can be used in any browser console.  Chrome provides a '<a href="https://github.com/bgrins/devtools-snippets#to-enable-devtools-snippets-in-chrome">snippets</a>' feature that can be used to manage the scripts, while Firefox has a '<a href="https://developer.mozilla.org/en-US/docs/Tools/Scratchpad">scratchpad</a>' feature that lets you run, edit, and save chunks of JavaScript.
          </p>
          <p>
            View the <a href="https://github.com/bgrins/devtools-snippets">devtools-snippets project page</a>.   For more information about using them in your favorite browser, check out the <a href="https://github.com/bgrins/devtools-snippets/blob/master/README.md">README</a>.  Here is an <a href="http://www.briangrinstead.com/blog/devtools-snippets"> article about snippets</a> detailing why you might use them and additional features that would be nice.
          </p>
        </div>
        <hr />

        <div class="snippets">
        <div id='allcolors'><div class='snippet'><h3><a href='snippets/allcolors/allcolors.js'>allcolors.js</a> <a href='#allcolors'>#</a></h3>

<p>Print out all colors from computed styles used in elements on the page.  <em>Uses styled console.log calls to visualize each color</em>.</p>

<p><a href="snippets/allcolors/allcolors.js"><img src="snippets/allcolors/allcolors.png" alt="allcolors" /></a></p>
</div><div class="highlight"><pre><span class="c1">// allcolors.js</span>
<span class="c1">// https://github.com/bgrins/devtools-snippets</span>
<span class="c1">// Print out CSS colors used in elements on the page.</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">allColors</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="kd">var</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;background-color&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;border-top-color&quot;</span><span class="p">,</span> <span class="s2">&quot;border-right-color&quot;</span><span class="p">,</span> <span class="s2">&quot;border-bottom-color&quot;</span><span class="p">,</span> <span class="s2">&quot;border-left-color&quot;</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">skipColors</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;rgb(0, 0, 0)&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;rgba(0, 0, 0, 0)&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;rgb(255, 255, 255)&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">};</span>

  <span class="p">[].</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nodeColors</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">props</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">color</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">skipColors</span><span class="p">[</span><span class="nx">color</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">allColors</span><span class="p">[</span><span class="nx">color</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">allColors</span><span class="p">[</span><span class="nx">color</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">nodes</span><span class="o">:</span> <span class="p">[]</span>
          <span class="p">};</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">nodeColors</span><span class="p">[</span><span class="nx">color</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">allColors</span><span class="p">[</span><span class="nx">color</span><span class="p">].</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
          <span class="nx">allColors</span><span class="p">[</span><span class="nx">color</span><span class="p">].</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">nodeColors</span><span class="p">[</span><span class="nx">color</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">allColorsSorted</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">allColors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">allColorsSorted</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">key</span><span class="o">:</span> <span class="nx">i</span><span class="p">,</span>
      <span class="nx">value</span><span class="o">:</span> <span class="nx">allColors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">allColorsSorted</span> <span class="o">=</span> <span class="nx">allColorsSorted</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">count</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">nameStyle</span> <span class="o">=</span> <span class="s2">&quot;font-weight:normal;&quot;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">countStyle</span> <span class="o">=</span> <span class="s2">&quot;font-weight:bold;&quot;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">colorStyle</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;background:&quot;</span> <span class="o">+</span> <span class="nx">color</span> <span class="o">+</span> <span class="s2">&quot;;color:&quot;</span> <span class="o">+</span> <span class="nx">color</span> <span class="o">+</span> <span class="s2">&quot;;border:1px solid #333;&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s2">&quot;All colors used in elements on the page&quot;</span><span class="p">);</span>
  <span class="nx">allColorsSorted</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="s2">&quot;%c    %c &quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">key</span> <span class="o">+</span> <span class="s2">&quot; %c(&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">count</span> <span class="o">+</span> <span class="s2">&quot; times)&quot;</span><span class="p">,</span>
      <span class="nx">colorStyle</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">key</span><span class="p">),</span> <span class="nx">nameStyle</span><span class="p">,</span> <span class="nx">countStyle</span><span class="p">);</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">(</span><span class="s2">&quot;All colors used in elements on the page&quot;</span><span class="p">);</span>
<span class="p">})();</span>
</pre></div>
</div><div id='cachebuster'><div class='snippet'><h3><a href='snippets/cachebuster/cachebuster.js'>cachebuster.js</a> <a href='#cachebuster'>#</a></h3>

<p>Overwrite all <code>link</code> and (optionally) <code>script</code> tags by adding Date.now() at the end of <code>href</code> and <code>src</code> attributes, respectively. By default processing <code>scripts</code> is not performed, you should change the variable <code>process_scripts</code> to true to run these.</p>

<p><a href="snippets/cachebuster.js"><img src="screenshots/cachebuster.png" alt="cachebuster" /></a></p>
</div><div class="highlight"><pre><span class="c1">//Cache Buster</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">rep</span> <span class="o">=</span> <span class="sr">/.*\?.*/</span><span class="p">,</span>
      <span class="nx">links</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">),</span>
      <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">),</span>
      <span class="nx">process_scripts</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
        <span class="nx">href</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">rep</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">href</span><span class="p">)){</span>
      <span class="nx">link</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">href</span><span class="o">+</span><span class="s1">&#39;&amp;&#39;</span><span class="o">+</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="nx">link</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">href</span><span class="o">+</span><span class="s1">&#39;?&#39;</span><span class="o">+</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">process_scripts</span><span class="p">){</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">script</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
          <span class="nx">src</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">rep</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">src</span><span class="p">)){</span>
        <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="o">+</span><span class="s1">&#39;&amp;&#39;</span><span class="o">+</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">else</span><span class="p">{</span>
        <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="o">+</span><span class="s1">&#39;?&#39;</span><span class="o">+</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span>
</pre></div>
</div>
        </div>

        <div id="footer">
          <strong>devtools-snippets</strong> is maintained by <a href="http://twitter.com/bgrins">@bgrins</a> and <a href="https://github.com/bgrins/devtools-snippets/network/members">contributors</a>.  Please let me know if you want to add or change any snippets by <a href="https://github.com/bgrins/devtools-snippets/issues">opening an issue or pull request</a>.
        </div>
      </div>
    </div>
  </body>
</html>

